# ğŸ“ ESTRUTURA COMPLETA DO PROJETO - ESKELBEL GESTÃƒO INTELIGENTE

## ğŸ—ï¸ Arquitetura Geral

```
lib/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core/                          # Camada de configuraÃ§Ãµes globais
â”‚   â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”‚   â”œâ”€â”€ database_config.dart
â”‚   â”‚   â”‚   â””â”€â”€ local_database.dart
â”‚   â”‚   â”œâ”€â”€ theme/
â”‚   â”‚   â”‚   â””â”€â”€ app_theme.dart
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â”œâ”€â”€ routes.dart
â”‚   â”‚       â”œâ”€â”€ formatters.dart
â”‚   â”‚       â””â”€â”€ constants.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ features/                      # MÃ³dulos da aplicaÃ§Ã£o (MVC)
â”‚   â”‚   â”œâ”€â”€ auth/                      # Feature de AutenticaÃ§Ã£o
â”‚   â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ user.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ login_page.dart    # Tela de login
â”‚   â”‚   â”‚   â””â”€â”€ controllers/
â”‚   â”‚   â”‚       â””â”€â”€ auth_controller.dart
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ dashboard/                 # Feature de Dashboard
â”‚   â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ dashboard_model.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ dashboard_page.dart
â”‚   â”‚   â”‚   â””â”€â”€ controllers/
â”‚   â”‚   â”‚       â””â”€â”€ dashboard_controller.dart
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ inventory/                 # Feature de Estoque
â”‚   â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ product.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ inventory_page.dart
â”‚   â”‚   â”‚   â””â”€â”€ controllers/
â”‚   â”‚   â”‚       â””â”€â”€ inventory_controller.dart
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ financial/                 # Feature de Financeiro
â”‚   â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ transaction.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ financial_page.dart
â”‚   â”‚   â”‚   â””â”€â”€ controllers/
â”‚   â”‚   â”‚       â””â”€â”€ financial_controller.dart
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ driver/                    # Feature de Motorista
â”‚   â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ delivery.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ driver_page.dart
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ driver_dashboard_view.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ driver_deliveries_view.dart
â”‚   â”‚   â”‚   â””â”€â”€ controllers/
â”‚   â”‚   â”‚       â””â”€â”€ driver_controller.dart
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ admin/                     # Feature de Administrador
â”‚   â”‚       â”œâ”€â”€ models/
â”‚   â”‚       â”‚   â””â”€â”€ report.dart        # â† VOCÃŠ ESTÃ AQUI
â”‚   â”‚       â”œâ”€â”€ views/
â”‚   â”‚       â”‚   â”œâ”€â”€ admin_page.dart
â”‚   â”‚       â”‚   â”œâ”€â”€ admin_dashboard_view.dart
â”‚   â”‚       â”‚   â”œâ”€â”€ admin_inventory_view.dart
â”‚   â”‚       â”‚   â”œâ”€â”€ admin_financial_view.dart
â”‚   â”‚       â”‚   â”œâ”€â”€ admin_driver_view.dart
â”‚   â”‚       â”‚   â””â”€â”€ admin_reports_view.dart
â”‚   â”‚       â””â”€â”€ controllers/
â”‚   â”‚           â””â”€â”€ admin_controller.dart
â”‚   â”‚
â”‚   â””â”€â”€ shared/                        # Componentes compartilhados
â”‚       â”œâ”€â”€ pages/
â”‚       â”‚   â””â”€â”€ home_page.dart
â”‚       â””â”€â”€ widgets/
â”‚           â””â”€â”€ user_menu.dart
â”‚
â””â”€â”€ main.dart                          # Ponto de entrada da aplicaÃ§Ã£o
```

## ğŸ”„ Fluxo de NavegaÃ§Ã£o

### 1ï¸âƒ£ **Login (Ponto de Entrada)**
```
main.dart 
  â†“
LoginPage (lib/src/features/auth/views/login_page.dart)
  â”œâ”€ Campo Email
  â”œâ”€ Campo Senha
  â”œâ”€ Seletor de Perfil (Combobox)
  â”œâ”€ BotÃ£o "Entrar"
  â””â”€ BotÃµes de Acesso RÃ¡pido (Admin, Estoquista, Motorista, Financeiro)
```

**FunÃ§Ã£o: `_navigateBasedOnRole(String role)`**
- âœ… Valida o papel do usuÃ¡rio
- âœ… Navega para a pÃ¡gina correta
- âœ… Remove todas as rotas anteriores (Navigator.of(context).pushAndRemoveUntil)

### 2ï¸âƒ£ **Roteamento por Papel**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    APÃ“S LOGIN                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  "admin"       â†’  AdminPage (5 abas)                    â”‚
â”‚  â”œâ”€ Dashboard  (Dashboard compartilhado)                â”‚
â”‚  â”œâ”€ Estoque    (InventoryPage)                          â”‚
â”‚  â”œâ”€ Financeiro (FinancialPage)                          â”‚
â”‚  â”œâ”€ Entregas   (DriverPage - sem navegaÃ§Ã£o)             â”‚
â”‚  â””â”€ RelatÃ³rios (AdminReportsView - EXCLUSIVO)           â”‚
â”‚                                                          â”‚
â”‚  "estoquista"  â†’  InventoryPage (GestÃ£o de Estoque)     â”‚
â”‚                                                          â”‚
â”‚  "motorista"   â†’  DriverPage (2 abas)                   â”‚
â”‚  â”œâ”€ InÃ­cio      (DriverDashboardView)                   â”‚
â”‚  â””â”€ Entregas    (DriverDeliveriesView)                  â”‚
â”‚                                                          â”‚
â”‚  "financeiro"  â†’  FinancialPage (TransaÃ§Ãµes)            â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“± PÃ¡ginas e Widgets

### **1. LoginPage** 
- **Arquivo**: `lib/src/features/auth/views/login_page.dart`
- **Tipo**: StatefulWidget
- **Funcionalidade**:
  - Captura email, senha e seleciona papel
  - 4 botÃµes de acesso rÃ¡pido (demo)
  - Navega baseado no papel selecionado
  - NÃ£o exibe UserMenu

---

### **2. DashboardPage**
- **Arquivo**: `lib/src/features/dashboard/views/dashboard_page.dart`
- **Tipo**: StatelessWidget
- **Funcionalidade**:
  - Exibe KPIs: Faturamento Hoje, Este MÃªs, Entregas, Lucro
  - Mostra alertas (produtos vencendo, estoque mÃ­nimo, inadimplentes)
  - Lista atividades recentes
  - AcessÃ­vel por: Admin, Motorista, Financeiro
  - **Possui UserMenu** âœ…

---

### **3. InventoryPage**
- **Arquivo**: `lib/src/features/inventory/views/inventory_page.dart`
- **Tipo**: StatefulWidget
- **Funcionalidade**:
  - 3 abas: Todos, Baixo Estoque, Produtos Vencendo
  - Busca por nome/cÃ³digo
  - Filtro por categoria
  - Dialog para adicionar produtos
  - Ajusta estoque (entrada/saÃ­da)
  - Deleta produtos
- **AcessÃ­vel por**: Estoquista, Admin
- **Possui UserMenu** âœ…

**Modelo Associado**: `Product`
```dart
class Product {
  final String id;
  final String nome;
  final String codigo;
  final String categoria;
  final int estoque;
  final int estoqueMinimo;
  final double preco;
  final String? validade;
  final String fornecedor;
}
```

---

### **4. FinancialPage**
- **Arquivo**: `lib/src/features/financial/views/financial_page.dart`
- **Tipo**: StatefulWidget
- **Funcionalidade**:
  - 3 abas: Todas, A Receber, A Pagar
  - Cards de resumo (Total Receber, Total Pagar, Saldo)
  - Dialog para adicionar transaÃ§Ãµes
  - Marca transaÃ§Ãµes como pagas
  - Filtra por tipo
- **AcessÃ­vel por**: Financeiro, Admin
- **Possui UserMenu** âœ…

**Modelo Associado**: `Transaction`
```dart
class Transaction {
  final String id;
  final TransactionType tipo;      // receber / pagar
  final String descricao;
  final String? cliente;
  final double valor;
  final String vencimento;
  final TransactionStatus status;  // pendente / pago / atrasado
  final String categoria;
}
```

---

### **5. DriverPage**
- **Arquivo**: `lib/src/features/driver/views/driver_page.dart`
- **Tipo**: StatefulWidget
- **Funcionalidade**:
  - 2 abas: InÃ­cio (Dashboard), Entregas
  - IndexedStack para alternar views
  - Usa DriverDashboardView e DriverDeliveriesView
- **AcessÃ­vel por**: Motorista, Admin
- **Possui UserMenu** âœ…

#### **5.1 DriverDashboardView**
- **Arquivo**: `lib/src/features/driver/views/driver_dashboard_view.dart`
- **Funcionalidade**:
  - KPIs: Entregas Hoje, ConcluÃ­das, Em Rota, Faturamento
  - Atividades recentes
  - Apenas leitura (view)

#### **5.2 DriverDeliveriesView**
- **Arquivo**: `lib/src/features/driver/views/driver_deliveries_view.dart`
- **Funcionalidade**:
  - Lista de entregas com 5 filtros
  - Cards com detalhes: nÃºmero, cliente, endereÃ§o, horÃ¡rio, valor
  - Modal bottom sheet para atualizar status
  - Stateful (gerencia estado dos filtros)

**Modelo Associado**: `Delivery`
```dart
class Delivery {
  final String id;
  final String numero;
  final String cliente;
  final String endereco;
  final String cidade;
  final double valor;
  final String dataPrevista;
  final DeliveryStatus status; // pendente / emrota / concluida / atrasada
  final String? observacoes;
  final String contato;
}
```

---

### **6. AdminPage**
- **Arquivo**: `lib/src/features/admin/views/admin_page.dart`
- **Tipo**: StatefulWidget
- **Funcionalidade**:
  - 5 abas com Ã­cones
  - IndexedStack para navegaÃ§Ã£o
  - Integra: Dashboard, Inventory, Financial, Driver, Reports
- **AcessÃ­vel por**: Admin APENAS
- **Possui UserMenu** âœ…

#### **6.1 AdminReportsView** â­
- **Arquivo**: `lib/src/features/admin/views/admin_reports_view.dart`
- **Funcionalidade**:
  - **EXCLUSIVA DO ADMIN**
  - Seletor de perÃ­odo (Semana, MÃªs, Trimestre, Ano)
  - BotÃµes de export (PDF, Excel)
  - 4 KPI Cards coloridos
  - 3 GrÃ¡ficos:
    - ğŸ“Š Faturamento DiÃ¡rio (BarChart)
    - ğŸ“ˆ Vendas por Categoria (PieChart)
    - ğŸ“‰ HistÃ³rico de Entregas (LineChart)
  - 4 BotÃµes de relatÃ³rios rÃ¡pidos

**Modelo Associado**: `Report`
```dart
class Report {
  final String id;
  final String title;
  final String description;
  final String icon;
  final ReportType type;
}

enum ReportType { completo, estoque, entregas, financeiro }
```

---

### **7. UserMenu** (Widget Compartilhado)
- **Arquivo**: `lib/src/shared/widgets/user_menu.dart`
- **Tipo**: StatelessWidget
- **Funcionalidade**:
  - Avatar com iniciais do usuÃ¡rio
  - Dropdown com:
    - Nome do usuÃ¡rio
    - Papel/Role
    - OpÃ§Ã£o "Sair" (logout)
  - DiÃ¡logo de confirmaÃ§Ã£o
  - Navega para LoginPage removendo todas as rotas
- **Usado em**: Dashboard, Inventory, Financial, Driver, Admin

---

### **8. HomePage** (IntermediÃ¡ria)
- **Arquivo**: `lib/src/shared/pages/home_page.dart`
- **Tipo**: StatelessWidget
- **Funcionalidade**:
  - Apenas redireciona para DashboardPage
  - Usada como ponte na navegaÃ§Ã£o

---

## ğŸ¨ Componentes Visuais

### **Cards**
- Exibem informaÃ§Ãµes em blocos organizados
- Cores diferenciadas por tipo (Green, Blue, Orange, Red, Purple)
- Usadas em: Dashboard, Financial, Reports

### **Abas (Tabs)**
- **Inventory**: 3 abas (Todos, Baixo, Vencendo)
- **Financial**: 3 abas (Todas, Receber, Pagar)
- **Driver**: 2 abas (InÃ­cio, Entregas)
- **Admin**: 5 abas (Dashboard, Estoque, Financeiro, Entregas, RelatÃ³rios)

### **Dialogs**
- Adicionar Produto (Inventory)
- Adicionar TransaÃ§Ã£o (Financial)
- Confirmar Logout (UserMenu)
- Atualizar Status (Driver Deliveries - Bottom Sheet)

### **Badges/Tags**
- Status coloridos (Verde=Pago, Vermelho=Atrasado, Amarelo=Pendente)
- Categorias de produtos
- Tipos de transaÃ§Ãµes

---

## ğŸ” Controle de Acesso

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              MATRIZ DE ACESSOS                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Funcionalidade â”‚Admin â”‚ Estoquistaâ”‚Motoristaâ”‚ Finan. â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Dashboard      â”‚  âœ…  â”‚     âŒ    â”‚   âœ…    â”‚   âœ…   â”‚
â”‚ Estoque        â”‚  âœ…  â”‚     âœ…    â”‚   âŒ    â”‚   âŒ   â”‚
â”‚ Financeiro     â”‚  âœ…  â”‚     âŒ    â”‚   âŒ    â”‚   âœ…   â”‚
â”‚ Entregas       â”‚  âœ…  â”‚     âŒ    â”‚   âœ…    â”‚   âŒ   â”‚
â”‚ RelatÃ³rios     â”‚  âœ…  â”‚     âŒ    â”‚   âŒ    â”‚   âŒ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Fluxo Completo de Uso

```
1. INICIAR APP
   â†“
2. LoginPage carrega
   â†“
3. UsuÃ¡rio seleciona papel e clica "Entrar"
   â†“
4. _navigateBasedOnRole() Ã© chamada
   â†“
5. Rota para pÃ¡gina baseada no papel:
   â”œâ”€ admin      â†’ AdminPage (5 abas)
   â”œâ”€ estoquista â†’ InventoryPage
   â”œâ”€ motorista  â†’ DriverPage (2 abas)
   â””â”€ financeiro â†’ FinancialPage
   â†“
6. PÃ¡gina abre com UserMenu no AppBar
   â†“
7. UsuÃ¡rio navega entre abas/seÃ§Ãµes
   â†“
8. Clica no avatar (UserMenu) â†’ Seleciona "Sair"
   â†“
9. DiÃ¡logo de confirmaÃ§Ã£o
   â†“
10. Volta para LoginPage (rotas limpas)
```

---

## ğŸ“¦ Dados Mock

### **Dashboard**: 
- 8 estatÃ­sticas mock

### **Inventory**: 
- 5 produtos mock

### **Financial**: 
- 6 transaÃ§Ãµes mock

### **Driver**: 
- 5 entregas mock

### **Reports**: 
- Faturamento: 6 dias
- Categorias: 4 categorias
- Entregas: 6 meses

---

## âš¡ Funcionalidades DinÃ¢micas

âœ… Busca e filtro de produtos
âœ… Abas com contadores dinÃ¢micos
âœ… CÃ¡lculos automÃ¡ticos (saldo, totais, percentuais)
âœ… Status coloridos baseados em regras
âœ… FormataÃ§Ã£o de moeda (PT-BR)
âœ… FormataÃ§Ã£o de datas (DD/MM/YYYY)
âœ… DiÃ¡logos interativos
âœ… SeleÃ§Ã£o de perÃ­odo para relatÃ³rios

---

## ğŸ”„ Estado (StatefulWidget vs StatelessWidget)

| PÃ¡gina | Tipo | RazÃ£o |
|--------|------|-------|
| LoginPage | StatefulWidget | Captura dados do formulÃ¡rio |
| DashboardPage | StatelessWidget | Apenas exibe dados |
| InventoryPage | StatefulWidget | Gerencia produtos, busca, filtros |
| FinancialPage | StatefulWidget | Gerencia transaÃ§Ãµes, abas |
| DriverPage | StatefulWidget | Gerencia abas |
| AdminPage | StatefulWidget | Gerencia 5 abas |
| UserMenu | StatelessWidget | Apenas UI |

---

## âœ¨ Resumo Final

ğŸ—ï¸ **Arquitetura**: MVC com Features
ğŸ” **SeguranÃ§a**: Controle de acesso por papel
ğŸ¨ **UI**: Material Design com cores diferenciadas
ğŸ“Š **Dados**: Mock data (pronto para integraÃ§Ã£o com backend)
ğŸš€ **Escalabilidade**: Estrutura preparada para crescimento